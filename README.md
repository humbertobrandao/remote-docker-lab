# Remote Docker Lab

This repository contains two scripts that automate the creation and deletion of isolated Docker-based project environments on a remote machine. The objective is to allow you to run heavy experiments (CPU/RAM intensive workloads, GPU tasks, simulations, long-running code) on a remote server, without consuming resources on your local computer.

## Files

### create_project.sh
Creates a directory on the remote server, generates a Dockerfile, configures a shared folder, and prepares a Docker environment ready to build and run.

### remove_project.sh
Deletes the project directory and removes its associated Docker container, fully cleaning all Docker resources tied to that project.

Both scripts execute from your local machine via SSH.

## Requirements

Local machine:
- Bash
- SSH client

Remote machine:
- SSH access
- Docker installed

## How the Docker Environment Works

Running create_project.sh creates a complete project structure on the remote server, including:
- A new project directory
- A Dockerfile
- A shared folder mount between host and container
- A base operating system defined inside the Dockerfile
- A customizable package installation section

## Shared Folder (Host â†” Container)

By default, the project directory on the remote machine is mounted inside the Docker container. Inside create_project.sh, look for the volume mapping:

```
-v /home/<user>/<project_name>:/workspace
```

You can modify the host folder (left side) or the container folder (right side).

Example modification:

```
-v /home/user/projectX:/workspace
```

to:

```
-v /mnt/data/projectX:/app
```

## Changing the Docker Base Operating System

Inside the Dockerfile generated by create_project.sh, the first line controls the base OS:

```
FROM ubuntu:22.04
```

Replace it with any base image you prefer.

## Installing Additional Packages Inside the Dockerfile

Inside the Dockerfile, locate the installation block:

```
RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    git \
    && apt-get clean
```

Extend or modify this list as needed.

---

# How to Use

## Create a New Remote Project

Syntax:

```
./create_project.sh <remote_user>@<remote_host> <project_name>
```

Example:

```
./create_project.sh user@192.168.1.20 experiment_alpha
```

Then connect and build:

```
ssh user@192.168.1.20
cd experiment_alpha
docker build -t experiment_alpha .
```

Run the container:

```
docker run --rm -it -v /home/user/experiment_alpha:/workspace experiment_alpha
```

## Create a New Remote Project With GitHub Integration (Optional)

The script `create_project.sh` also supports automatically creating a **private GitHub repository**, initializing Git inside the remote project folder, and performing the first commit and push.

This mode is optional and only activates when you provide **four arguments** instead of two.

### Syntax

```
./create_project.sh <remote_user>@<remote_host> <project_name> <github_user> <github_repo_name>
```

### Example

```
./create_project.sh user@192.168.1.20 projectX mygithubuser projectX
```

### What happens in this mode?

When the optional GitHub parameters are provided, the script will:

1. Create the project normally on the remote machine.
2. Prompt you for your **GitHub Personal Access Token**.
3. Create a **private GitHub repository** named `<github_repo_name>`.
4. Initialize a Git repository inside the remote project folder.
5. Add all files and create the first commit.
6. Push the commit to GitHub on the `main` branch.

### Requirements for GitHub Mode

- A GitHub Personal Access Token with **repo** permission.
- The target repository must **not already exist**.
- Git must be available on the remote server.

### Example Workflow

```
./create_project.sh user@server projectX mygithubuser projectX
# Script prompts for GitHub token
# Remote project is created
# Private GitHub repository is created
# First commit and push are performed automatically
```

### Switching Remote URL to SSH (Recommended)

```
cd ~/projects/projectX
git remote set-url origin git@github.com:mygithubuser/projectX.git
```

---

## Remove a Remote Project

Syntax:

```
./remove_project.sh <remote_user>@<remote_host> <project_name>
```

Example:

```
./remove_project.sh user@192.168.1.20 experiment_alpha
```

This deletes the project directory and removes the Docker container.

---

# Typical Workflow

```
./create_project.sh user@server projectX
rsync -avz ./local_code/ user@server:projectX/code/
ssh user@server
cd projectX
docker build -t projectX .
docker run --rm -it -v /home/user/projectX:/workspace projectX
./remove_project.sh user@server projectX
```

## Customizations

Inside create_project.sh:

- Change OS: edit the FROM line in the Dockerfile.
- Install packages: edit the apt-get or pip install section.
- Modify shared folder: edit the -v host:container mount.
- Change container name: edit the naming variable.
- Change remote folder path: modify the ssh target path.

---

# Using VSCode with Remote Docker Lab

This section explains how to work with your remote Docker-based project using Visual Studio Code (VSCode).  
After you create a project using `create_project.sh`, you can use VSCode to edit files directly on the remote server or even inside the Docker container.

---

## Required VSCode Extensions

Install the following extensions on your local machine:

### 1. Remote - SSH  
**ID:** ms-vscode-remote.remote-ssh  

### 2. Docker  
**ID:** ms-azuretools.vscode-docker  

### 3. Remote - Containers (optional but recommended)  
**ID:** ms-vscode-remote.remote-containers  

### 4. Recommended language extensions
- Python: ms-python.python
- Jupyter: ms-toolsai.jupyter
- YAML: redhat.vscode-yaml
- GitLens: eamodio.gitlens

---

## Connecting VSCode to the Remote Server

1. Open VSCode.
2. Press: `Ctrl + Shift + P`
3. Run: **Remote-SSH: Add New SSH Host**
4. Enter: `user@remote_server_ip`
5. Again press: `Ctrl + Shift + P`
6. Select: **Remote-SSH: Connect to Host**
7. Choose your server.

---

## Opening the Remote Project Folder

1. Go to **File > Open Folder**
2. Select:

```
/home/user/project_name
```

---

## Using the Remote Terminal

Inside VSCode:

Press:

```
Ctrl + `
```

Run commands normally:

```
docker build -t myproject .
docker run --rm -it -v /home/user/myproject:/workspace myproject
```

---

## Developing Inside the Docker Container (Optional)

1. Start container:

```
docker run -d -v /home/user/projectX:/workspace --name projectX projectX
```

2. In VSCode:

```
Ctrl + Shift + P
Remote-Containers: Attach to Running Container...
```

---

## Summary of VSCode Workflow

1. Create project using create_project.sh  
2. Connect via Remote-SSH  
3. Open project folder  
4. Use terminal inside VSCode  
5. Optionally attach to container  
