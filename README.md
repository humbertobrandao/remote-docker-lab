# Remote Docker Lab

This repository contains two scripts that automate the creation and deletion of isolated Docker-based project environments on a remote machine. The objective is to allow you to run heavy experiments (CPU/RAM intensive workloads, GPU tasks, simulations, long-running code) on a remote server, without consuming resources on your local computer.

## Files

### create_project.sh
Creates a directory on the remote server, generates a Dockerfile, configures a shared folder, and prepares a Docker environment ready to build and run.

### remove_project.sh
Deletes the project directory and removes its associated Docker container, fully cleaning all Docker resources tied to that project.

Both scripts execute from your local machine via SSH.

## Requirements

Local machine:
- Bash
- SSH client

Remote machine:
- SSH access
- Docker installed

## How the Docker Environment Works

Running create_project.sh creates a complete project structure on the remote server, including:
- A new project directory
- A Dockerfile
- A shared folder mount between host and container
- A base operating system defined inside the Dockerfile
- A customizable package installation section

## Shared Folder (Host ↔ Container)

By default, the project directory on the remote machine is mounted inside the Docker container. Inside create_project.sh, look for the volume mapping:

```
-v /home/<user>/<project_name>:/workspace
```

You can modify the host folder (left side) or the container folder (right side).

Example modification:

```
-v /home/user/projectX:/workspace
```

to:

```
-v /mnt/data/projectX:/app
```

## Changing the Docker Base Operating System

Inside the Dockerfile generated by create_project.sh, the first line controls the base OS:

```
FROM ubuntu:22.04
```

Replace it with any base image you prefer.

## Installing Additional Packages Inside the Dockerfile

Inside the Dockerfile, locate the installation block:

```
RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    git \
    && apt-get clean
```

Extend or modify this list as needed.

---

# How to Use

## Create a New Remote Project

Syntax:

```
./create_project.sh <remote_user>@<remote_host> <project_name>
```

Example:

```
./create_project.sh user@192.168.1.20 experiment_alpha
```

Then connect and build:

```
ssh user@192.168.1.20
cd experiment_alpha
docker build -t experiment_alpha .
```

Run the container:

```
docker run --rm -it -v /home/user/experiment_alpha:/workspace experiment_alpha
```

## Remove a Remote Project

Syntax:

```
./remove_project.sh <remote_user>@<remote_host> <project_name>
```

Example:

```
./remove_project.sh user@192.168.1.20 experiment_alpha
```

This deletes the project directory and removes the Docker container.

---

# Typical Workflow

```
./create_project.sh user@server projectX
rsync -avz ./local_code/ user@server:projectX/code/
ssh user@server
cd projectX
docker build -t projectX .
docker run --rm -it -v /home/user/projectX:/workspace projectX
./remove_project.sh user@server projectX
```

## Customizations

Inside create_project.sh:

- Change OS: edit the FROM line in the Dockerfile.
- Install packages: edit the apt-get or pip install section.
- Modify shared folder: edit the -v host:container mount.
- Change container name: edit the naming variable.
- Change remote folder path: modify the ssh target path.

# Using VSCode with Remote Docker Lab

This section explains how to work with your remote Docker-based project using Visual Studio Code (VSCode).  
After you create a project using `create_project.sh`, you can use VSCode to edit files directly on the remote server or even inside the Docker container.

---

## Required VSCode Extensions

Install the following extensions on your local machine:

### 1. Remote - SSH  
**ID:** ms-vscode-remote.remote-ssh  
Allows VSCode to connect to a remote server over SSH and open folders directly on the server.

### 2. Docker  
**ID:** ms-azuretools.vscode-docker  
Adds Docker integration to VSCode, letting you view images, containers, logs, and execute actions.

### 3. Remote - Containers (optional but recommended)  
**ID:** ms-vscode-remote.remote-containers  
Allows VSCode to open and develop *inside* a Docker container running on the remote server.

### 4. Recommended language extensions  
Depending on your tech stack:

- Python: `ms-python.python`
- Jupyter: `ms-toolsai.jupyter`
- YAML: `redhat.vscode-yaml`
- GitLens: `eamodio.gitlens`

---

## Connecting VSCode to the Remote Server

1. Open VSCode.
2. Press:
   ```
   Ctrl + Shift + P
   ```
3. Type:
   ```
   Remote-SSH: Add New SSH Host
   ```
4. Enter the same SSH address used with your scripts:
   ```
   user@remote_server_ip
   ```
5. VSCode will store this configuration in your SSH config file.
6. Now, again press:
   ```
   Ctrl + Shift + P
   ```
7. Select:
   ```
   Remote-SSH: Connect to Host
   ```
8. Choose your server from the list.

VSCode will open a remote window connected directly to your server.

---

## Opening the Remote Project Folder

Once connected to the server:

1. Click **File > Open Folder**
2. Select the project directory created by the script, for example:
   ```
   /home/user/project_name
   ```
3. Click **OK**.

VSCode now edits files directly on the remote server.

---

## Using the Remote Terminal

Inside VSCode:

1. Press:
   ```
   Ctrl + `
   ```
2. A terminal will open **on the remote server**, inside your project directory.

You can run commands like:
```
docker build -t myproject .
docker run --rm -it -v /home/user/myproject:/workspace myproject
```

---

## Developing Inside the Docker Container (Optional)

If you installed the **Remote - Containers** extension, you can open VSCode *inside the running container*.

Steps:

1. Start the container on the remote server:
   ```
   docker run -d -v /home/user/projectX:/workspace --name projectX projectX
   ```
2. In VSCode, press:
   ```
   Ctrl + Shift + P
   ```
3. Select:
   ```
   Remote-Containers: Attach to Running Container...
   ```
4. Choose your container (ex: `projectX`).

VSCode will restart in a new window, now running **inside the container environment**.

This allows:

- Editing files within the mounted folder
- Using Python/R/Java inside the container
- Running terminal commands inside the container
- Full isolation from both your local and remote host systems

---

## Summary of VSCode Workflow

1. Create project using `create_project.sh`.
2. Open VSCode → Remote-SSH → Connect to server.
3. Open the remote folder `/home/user/project_name`.
4. Use the terminal inside VSCode to run Docker commands.
5. (Optional) Attach VSCode directly to the running container.

This setup provides a complete cloud-based development workflow, with no need for local CPU/RAM usage.

